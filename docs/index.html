<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
  <link rel="stylesheet" href="style.css">
  <title>ABC Project</title>
</head>
<body>
<script src="//rawgit.com/marpple/abc-functional-javascript/master/etc/abc.all.js"></script>
<script src="//code.jquery.com/jquery-2.2.4.min.js"></script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
<script src="//rawgit.com/marpple/abc-functional-javascript/master/example/js/underscore.js"></script>
<script>

  var funcs = _.filter(_.keys(F), function(val) { return val !== 'F' && val !== 'G' });

  G.sections = {
    $A : '\
        section#A \
          p 나는 세션 A\
          p A 함수를 설명하지\
          p 함수는 블라블라~~~\
        ',
    $B : '\
        section#B \
          p 나는 세션 B\
          p B 함수를 설명하지\
          p 함수는 블라블라~~~\
        ',
    $CB : '\
        section#CB \
          p 나는 세션 CB\
          p CB 함수를 설명하지\
          p 함수는 블라블라~~~\
        ',
    $B2 : '\
        section#B2 \
          p 나는 세션 B2\
          p B2 함수를 설명하지\
          p 함수는 블라블라~~~\
        ',
    $H : '\
        section#H \
          p 나는 세션 H\
          p H 함수를 설명하지\
          p 함수는 블라블라~~~\
        '
  };

  // body 내부 HTML
  C(funcs, [H('funcs','\
    div.bar#side_bar\
      h3 ABC JS \
        br\
        small Functional JavaScript\
      a.small[href=https://github.com/marpple/abc-functional-javascript] GitHub Repository\
      div.input-group\
        input.form-control#search[type=text placeholder=Search]\
        span.input-group-addon\
          span.glyphicon.glyphicon-search\
      ul.func_list\
        {{{C(funcs, ', H.each('func', '\
        li[data=!{func}!]\
          a[href=#!{func}!]\
            h3\
              u !{func}!\
          ul.method_list.!{func}!\
            {{{C(_.keys(!{func}!),', H.each("method", "\
            li[data=!{method}!]\
              a[href=#!{method}!] !{method}!"), ')}}}'
        ),')}}}\
    div.container#section_container\
        {{{C(_.values(G.sections), ', H.each("section", "\
         div {{{H('', section)()}}}\
        "), ')}}}\
    '),
    $,
    B.M('appendTo', 'body')]);

  $('#search').keyup(function(e) {
    update_section_list($(e.target).val()); //search_str
  });

  function update_section_list(str) {
    if (str) {
      var reg = new RegExp(str, "i");

      var $func_li = _.filter($('ul.func_list > li'), function(func){
          return !$(func).attr('data').match(reg);
        });

      var res = _.map($func_li, function(li) {
        var $li = $(li);
        return li.innerText.match(reg) ? (function() { $li.show(); return $li.children('ul')[0].childNodes; })() : $li.hide();
      });

      _.each(res, function(li) {
        if (li) {
          _.each(li, function (inner_li) { return inner_li.innerText.match(reg) ? $(inner_li).show() : $(inner_li).hide(); });
        }
        return;
      });

      return;
    }

    return $('#side_bar li').show();
  }
</script>
</body>
</html>